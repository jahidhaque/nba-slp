"use strict";!function(){angular.module("nbaslp",["ngResource","ngRoute"]).config(["$routeProvider","$locationProvider",function(l,e){l.when("/",{templateUrl:"home/welcome/welcome.view.html",controller:"welcomeCtrl",controllerAs:"wvm"}).when("/signup",{templateUrl:"signup/signup.view.html",controller:"signupCtrl",controllerAs:"regvm"}).when("/signin",{templateUrl:"signin/signin.view.html",controller:"signinCtrl",controllerAs:"lvm"}).when("/profile",{templateUrl:"profile/profile.view.html",controller:"profileCtrl",controllerAs:"provm"}).when("/help",{templateUrl:"help/help.view.html",controller:"helpCtrl",controllerAs:"hvm"}).when("/sitecontroll",{templateUrl:"admin/sitecontroll/sitecontroll.view.html",controller:"sitecontrollCtrl",controllerAs:"adSite"}).when("/welcome",{templateUrl:"welcome/welcome.view.html",controller:"welcomeCtrl",controllerAs:"wvm"}),e.html5Mode({enabled:!0})}])}();
"use strict";function authentication(n,t){var e=function(t){n.localStorage.nbaslp=t},a=function(){return n.localStorage.nbaslp},o=function(){var t=a(),e=void 0;return!!t&&(e=t.split(".")[1],e=n.atob(e),e=JSON.parse(e))};return{currentUser:function(){if(o){var t=a().split(".")[1];return t=n.atob(t),t=JSON.parse(t),{userId:t._id,email:t.email,accountStatus:t.accountStatus,accountType:t.accountType,accountId:t.userId,name:t.name}}return!1},saveToken:e,getToken:a,isLoggedIn:o,signUp:function(n){return t.post("/api/signup",n).success(function(n){e(n.token)})},signIn:function(n){return t.post("/api/signin",n).success(function(n){e(n.token)})},Logout:function(){n.localStorage.removeItem("nbaslp")}}}angular.module("nbaslp").service("authentication",authentication),authentication.$inject=["$window","$http"];
"use strict";!function(){function t(t,n){var e=function(t){return t},c=function(t){return t};return{getAccountStatuses:function(t){return n.get("/api/"+t+"/statuses").then(e).catch(c)},updateUserStatus:function(t){return n.post("/api/userstatus",t).then(e).catch(c)},saveBasicInfo:function(t){return n.post("/api/createbasicprofile",t).then(e).catch(c)},saveBranchInfo:function(t,a){return n.post("/api/"+t+"/savebranchinfo",a).then(e).catch(c)}}}angular.module("nbaslp").service("account",t),t.$inject=["$window","$http"]}();
"use strict";!function(){function t(t){var e=function(t){return t},n=function(t){return t};return{addPreferredCommittee:function(r){return t.post("/api/createcommittee",r).then(e).catch(n)}}}angular.module("nbaslp").service("sitecontroller",t),t.$inject=["$http"]}();
"use strict";!function(){angular.module("nbaslp").directive("siteNav",function(){return{restrict:"EA",templateUrl:"common/directives/nav/site-nav.template.html",controller:"navCtrl as nvm"}})}();
"use strict";!function(){function n(n,t){n.isLoggedIn()?(this.loggedInUri=!0,this.loggedInName=n.currentUser().name,this.currentAccountType=n.currentUser().accountType,console.log(this.currentAccountType)):this.loggedInUri=!1,this.logout=function(){n.Logout(),t.path("/signin")}}angular.module("nbaslp").controller("navCtrl",n),n.$inject=["authentication","$location"]}();
"use strict";!function(){angular.module("nbaslp").directive("siteFooter",function(){return{restrict:"EA",templateUrl:"common/directives/footer/footer.template.html"}})}();
"use strict";!function(){angular.module("nbaslp").controller("welcomeCtrl",function(){})}();
"use strict";!function(){function r(r,t){var o=this;o.user={firstName:"",lastName:"",displayName:"",email:"",password:"",confirmPassword:""},o.register=function(){r.signUp(o.user).then(function(r){r.data.error?(o.RegistrationError=!0,o.RegistrationErrorMsg=r.data.error):(o.RegistrationError=!1,t.path("/welcome"))}).catch(function(r){r&&(o.RegistrationError=!0,o.RegistrationErrorMsg=r.data.error)})},r.isLoggedIn()&&t.path("/welcome")}angular.module("nbaslp").controller("signupCtrl",r),r.$inject=["authentication","$location"]}();
"use strict";!function(){function r(r,o){var n=this;n.user={email:"",password:""},r.isLoggedIn()?o.path("/welcome"):(n.login=function(){n.user.email&&n.user.password?(n.loginError=!1,n.doLogin()):(n.loginError=!0,n.loginErrorMsg="Error! all * fields are required")},n.doLogin=function(){r.signIn(n.user).error(function(r){n.loginError=!0,n.loginErrorMsg=r.error}).then(function(){o.path("/welcome")})})}angular.module("nbaslp").controller("signinCtrl",r),r.$inject=["authentication","$location"]}();
"use strict";!function(){function r(r,t,a,n){var c=this;r.isLoggedIn()?(c.profileStatus=r.currentUser().accountStatus,c.currentAccountType=r.currentUser().accountType,"customer"===r.currentUser().accountType?(c.getProfileStatuses=function(){a.getAccountStatuses(r.currentUser().email).then(function(r){r.data.error?(c.statusLoadError=!0,c.statusLoadErrorMsg=r.data.error):(c.statusLoadError=!1,c.userStatuses=r.data.statuses)}).catch(function(r){c.statusLoadError=!0,c.statusLoadErrorMsg=r})},c.basicProfile={whos:r.currentUser().email,userId:r.currentUser().userId,formerName:"",sex:"",tele:"",address:""},c.saveBasicInfo=function(){a.saveBasicInfo(c.basicProfile).then(function(t){if(t.data.error)c.basicAccountInfoError=!0,c.basicAccountInfoErrorMsg=t.data.error;else{var e={update_at:"basic_info",email:r.currentUser().email,status:!0};a.updateUserStatus(e).then(function(r){!0===r.data.updated?(c.statusUpdateError=!1,n.reload()):(c.basicAccountInfoError=!0,c.basicAccountInfoErrorMsg=r.data.error)}).catch(function(r){c.statusUpdateError=!0,c.basicAccountInfoErrorMsg=r})}}).catch(function(r){})},c.branch={year:"",branch:""},c.saveBatchInfo=function(){a.saveBranchInfo(r.currentUser().email,c.branch).then(function(r){r.data.error?(c.branchInfoError=!0,c.branchInfoErrorMsg=r.data.error):r.data.success&&(c.branchInfoError=!1,c.branchSuccess="Branch information hase been successfully added")}).catch(function(r){c.branchInfoError=!0,c.branchInfoErrorMsg=r})}):r.currentUser().accountType):t.path("/signin")}angular.module("nbaslp").controller("profileCtrl",r),r.$inject=["authentication","$location","account","$route"]}();
"use strict";!function(){function n(n,t){}angular.module("nbaslp").controller("welcomeCtrl",n),n.$inject=["authentication","$location"]}();
"use strict";!function(){function t(t,e,n){var o=this;t.isLoggedIn()?"admin"===t.currentUser().accountType?(o.committee={name:""},o.addPreferredCommittee=function(){n.addPreferredCommittee(o.committee).then(function(t){}).catch(function(t){})}):e.path("/welcome"):e.path("/signin")}angular.module("nbaslp").controller("sitecontrollCtrl",t),t.$inject=["authentication","$location","sitecontroller"]}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImF1dGhlbnRpY2F0aW9uLnNlcnZpY2UuanMiLCJhY2NvdW50LnNlcnZpY2UuanMiLCJzaXRlLWNvbnRyb2xsZXIuc2VydmljZS5qcyIsIm5hdi5kaXJlY3RpdmUuanMiLCJuYXYuY29udHJvbGxlci5qcyIsImZvb3Rlci5kaXJlY3RpdmUuanMiLCJ3ZWxjb21lLmNvbnRyb2xsZXIuanMiLCJzaWdudXAuY29udHJvbGxlci5qcyIsInNpZ25pbi5jb250cm9sbGVyLmpzIiwicHJvZmlsZS5jb250cm9sbGVyLmpzIiwic2l0ZWNvbnRyb2xsLmNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsInRlbXBsYXRlVXJsIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJjb250cm9sbGVyIiwiY29udHJvbGxlckFzIiwid2hlbiIsImh0bWw1TW9kZSIsImVuYWJsZWQiLCJzYXZlVG9rZW4iLCIkd2luZG93IiwidG9rZW4iLCJsb2NhbFN0b3JhZ2UiLCJnZXRUb2tlbiIsImlzTG9nZ2VkSW4iLCJwYXlsb2FkIiwiSlNPTiIsInBhcnNlIiwiYXRvYiIsImN1cnJlbnRVc2VyIiwic3BsaXQiLCJhY2NvdW50U3RhdHVzIiwidXNlcklkIiwiX2lkIiwiYWNjb3VudFR5cGUiLCJhY2NvdW50SWQiLCJuYW1lIiwiTG9nb3V0Iiwic2lnblVwIiwidXNlciIsIiRodHRwIiwicG9zdCIsInN1Y2Nlc3MiLCJkYXRhIiwic2lnbkluIiwiaGFuZGxlU3VjY2VzcyIsInJlbW92ZUl0ZW0iLCJhdXRoZW50aWNhdGlvbiIsImdldEFjY291bnRTdGF0dXNlcyIsInJlc3BvbnNlIiwiaGFuZGxlRXJyb3IiLCJ1cGRhdGVVc2VyU3RhdHVzIiwidGhlbiIsImNhdGNoIiwic2F2ZUJyYW5jaEluZm8iLCJzYXZlQmFzaWNJbmZvIiwiYWNjb3VudCIsIiRpbmplY3QiLCJhZGRQcmVmZXJyZWRDb21taXR0ZWUiLCJzaXRlY29udHJvbGxlciIsImRpcmVjdGl2ZSIsInNpdGVOYXYiLCJyZXN0cmljdCIsIm5hdkN0cmwiLCIkbG9jYXRpb24iLCJudm0iLCJsb2dnZWRJbk5hbWUiLCJsb2dnZWRJblVyaSIsImN1cnJlbnRBY2NvdW50VHlwZSIsImxvZ291dCIsInBhdGgiLCJzaXRlRm9vdGVyIiwic2lnbnVwQ3RybCIsInJlZ3ZtIiwidGhpcyIsImxhc3ROYW1lIiwiZGlzcGxheU5hbWUiLCJlbWFpbCIsInBhc3N3b3JkIiwiY29uZmlybVBhc3N3b3JkIiwicmVnaXN0ZXIiLCJSZWdpc3RyYXRpb25FcnJvck1zZyIsIlJlZ2lzdHJhdGlvbkVycm9yIiwiZXJyb3IiLCJlcnIiLCJzaWduaW5DdHJsIiwibHZtIiwibG9naW5FcnJvck1zZyIsImxvZ2luRXJyb3IiLCJkb0xvZ2luIiwicHJvdm0iLCIkcm91dGUiLCJnZXRQcm9maWxlU3RhdHVzZXMiLCJzdGF0dXNMb2FkRXJyb3JNc2ciLCJzdGF0dXNMb2FkRXJyb3IiLCJ1c2VyU3RhdHVzZXMiLCJzdGF0dXNlcyIsImJhc2ljUHJvZmlsZSIsImFkZHJlc3MiLCJ3aG9zIiwidGVsZSIsInVwZGF0ZV9hdCIsInN0YXR1cyIsImJhc2ljQWNjb3VudEluZm9FcnJvciIsImJhc2ljQWNjb3VudEluZm9FcnJvck1zZyIsInJlbG9hZCIsInVwZGF0ZWQiLCJzdGF0dXNVcGRhdGVFcnJvciIsImJyYW5jaCIsImJyYW5jaEluZm9FcnJvciIsImJyYW5jaEluZm9FcnJvck1zZyIsImJyYW5jaFN1Y2Nlc3MiLCJwcm9maWxlQ3RybCIsIndlbGNvbWVDdHJsIiwic2l0ZWNvbnRyb2xsQ3RybCIsImFkU2l0ZSIsImNvbW1pdHRlZSJdLCJtYXBwaW5ncyI6IkFBUUEsY0FFQSxXQUNJQSxRQUNLQyxPQUFPLFVBQVcsYUFBYyxZQUdyQ0MsUUFBU0EsaUJBQVQsb0JBR1lDLFNBQUFBLEVBQWFDLEdBQ2JDLEVBQ0FDLEtBQUFBLEtBRUVILFlBQVcsaUNBQ2JBLFdBQWEsY0FDYkUsYUFBWSxRQUdmRSxLQUFLLFdBQ0ZKLFlBQWEs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QkFBcUI3RCxFQUFTTixLQUFLd0MsT0FFcENsQyxFQUFTTixLQUFLRCxVQUNuQmdELEVBQU1tQixpQkFBa0IsRUFDeEJuQixFQUFNcUIsY0FBZ0IscURBRzdCMUQsTUFBTSxTQUFBK0IsR0FDSE0sRUFBTW1CLGlCQUFrQixFQUN4Qm5CLEVBQU1vQixtQkFBcUIxQixNQUlsQ3JDLEVBQWVsQixjQUFjSyxhQUt0QzhCLEVBQVVNLEtBQUssV0F0SHZCN0QsUUFDS0MsT0FBTyxVQUdac0csV0FBWXZELGNBQVd1RCxHQUV2QkEsRUFBU0EsU0FBWWpFLGlCQUFnQmlCLFlBQVdSLFVBQWlCLFVBUnJFO0FIRkEsY0FFQSxXQVVLLFNBQUF5RCxFQUFBbEUsRUFBQWlCLElBUkR2RCxRQUNLQyxPQUFPLFVBR1p1RyxXQUFZeEQsY0FBV3dELEdBRXZCQSxFQUFTQSxTQUFZbEUsaUJBQWdCaUIsYUFSekM7QUlGQSxjQUVBLFdBUUksU0FBU2tELEVBQWlCbkUsRUFBZ0JpQixFQUFXTCxHQUdqRCxJQUFJWixFQUFBQSxLQUVBQSxFQUFJQSxhQUVtQixVQUFuQm9FLEVBQU9DLGNBQVlsRixhQUFBaUYsRUFBbkJDLFdBR0FoRixLQUFBLElBVUMrRSxFQVREekQsc0JBQUEsV0FXQ0MsRUFDREssc0JBQUFtRCxFQUFBQyxXQUNIaEUsS0FBQSxTQUFBSCxNQUlKSSxNQUFBLFNBQUErQixRQUxPcEIsRUFBVU0sS0FBSyxZQUluQk4sRUFBVU0sS0FBSyxXQWpDdkI3RCxRQUNLQyxPQUFPLFVBR1p3RyxXQUFBQSxtQkFBNEJBLEdBRTVCQSxFQUFTQSxTQUFpQm5FLGlCQUFnQmlCLFlBQVdMLGtCQVJ6RCIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbnwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG58IHNldHRpbmcgdXAgZW50cnkgcG9pbnQgZm9yIGFuZ3VsYXIgZnJvbnQtZW5kXG58IEBhdXRob3I6IGphaGlkIGhhcXVlIDxqYWhpZC5oYXF1ZUB5YWhvby5jb20+XG58IEBjb3B5cmlnaHQ6IG5iYS1zbHAsIDIwMTdcbnwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4qL1xuXG4ndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbiAoKSB7XG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCduYmFzbHAnLCBbJ25nUmVzb3VyY2UnLCAnbmdSb3V0ZSddKVxuICAgICAgICAuY29uZmlnKFsnJHJvdXRlUHJvdmlkZXInLCAnJGxvY2F0aW9uUHJvdmlkZXInLCBjb25maWddKTtcblxuICAgIGZ1bmN0aW9uIGNvbmZpZygkcm91dGVQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcbiAgICAgICAgJHJvdXRlUHJvdmlkZXJcbiAgICAgICAgICAgIC53aGVuKCcvJywge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnaG9tZS93ZWxjb21lL3dlbGNvbWUudmlldy5odG1sJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnd2VsY29tZUN0cmwnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3d2bScsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLndoZW4oJy9zaWdudXAnLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzaWdudXAvc2lnbnVwLnZpZXcuaHRtbCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3NpZ251cEN0cmwnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3JlZ3ZtJyxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAud2hlbignL3NpZ25pbicsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3NpZ25pbi9zaWduaW4udmlldy5odG1sJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnc2lnbmluQ3RybCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlckFzOiAnbHZtJyxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAud2hlbignL3Byb2ZpbGUnLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwcm9maWxlL3Byb2ZpbGUudmlldy5odG1sJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAncHJvZmlsZUN0cmwnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3Byb3ZtJyxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAud2hlbignL2hlbHAnLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdoZWxwL2hlbHAudmlldy5odG1sJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnaGVscEN0cmwnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ2h2bScsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLndoZW4oJy9zaXRlY29udHJvbGwnLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhZG1pbi9zaXRlY29udHJvbGwvc2l0ZWNvbnRyb2xsLnZpZXcuaHRtbCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3NpdGVjb250cm9sbEN0cmwnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ2FkU2l0ZScsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLndoZW4oJy93ZWxjb21lJywge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnd2VsY29tZS93ZWxjb21lLnZpZXcuaHRtbCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3dlbGNvbWVDdHJsJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6ICd3dm0nLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHtcbiAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgIH0pO1xuICAgIH1cbn0pKCk7XG4iLCIvKlxufC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbnwgc2V0dGluZyB1cCBhdXRoZW50aWNhdGlvbiBzZXJ2aWNlIFxufCBAYXV0aG9yOiBqYWhpZCBoYXF1ZSA8amFoaWQuaGFxdWVAeWFob28uY29tPlxufCBAY29weXJpZ2h0OiBuYmEtc2xwLCAyMDE3XG58LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnbmJhc2xwJylcbiAgICAuc2VydmljZSgnYXV0aGVudGljYXRpb24nLCBhdXRoZW50aWNhdGlvbik7XG5cbmF1dGhlbnRpY2F0aW9uLiRpbmplY3QgPSBbJyR3aW5kb3cnLCAnJGh0dHAnXTtcblxuZnVuY3Rpb24gYXV0aGVudGljYXRpb24oJHdpbmRvdywgJGh0dHApIHtcbi8vIHNhdmluZyB0b2tlbi5cbiAgICBjb25zdCBzYXZlVG9rZW4gPVx0ZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgICAgICR3aW5kb3cubG9jYWxTdG9yYWdlWyduYmFzbHAnXSA9IHRva2VuO1xuICAgIH07XG5cbiAgICBjb25zdCBnZXRUb2tlbiA9XHRmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAkd2luZG93LmxvY2FsU3RvcmFnZVsnbmJhc2xwJ107XG4gICAgfTtcblxuICAgIGNvbnN0IGlzTG9nZ2VkSW4gPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRva2VuID0gZ2V0VG9rZW4oKTtcbiAgICAgICAgbGV0IHBheWxvYWQ7XG5cbiAgICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgICAgICBwYXlsb2FkID0gdG9rZW4uc3BsaXQoJy4nKVsxXTtcbiAgICAgICAgICAgIHBheWxvYWQgPSAkd2luZG93LmF0b2IocGF5bG9hZCk7XG4gICAgICAgICAgICBwYXlsb2FkID0gSlNPTi5wYXJzZShwYXlsb2FkKTtcbiAgICAgICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gKCkgPT4ge1xuICAgICAgICBpZiAoaXNMb2dnZWRJbikge1xuICAgICAgICAgICAgY29uc3QgdG9rZW4gPSBnZXRUb2tlbigpO1xuICAgICAgICAgICAgbGV0IHBheWxvYWQgPSB0b2tlbi5zcGxpdCgnLicpWzFdO1xuICAgICAgICAgICAgcGF5bG9hZCA9ICR3aW5kb3cuYXRvYihwYXlsb2FkKTtcbiAgICAgICAgICAgIHBheWxvYWQgPSBKU09OLnBhcnNlKHBheWxvYWQpO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVzZXJJZDogcGF5bG9hZC5faWQsXG4gICAgICAgICAgICAgICAgZW1haWw6IHBheWxvYWQuZW1haWwsXG4gICAgICAgICAgICAgICAgYWNjb3VudFN0YXR1czogcGF5bG9hZC5hY2NvdW50U3RhdHVzLFxuICAgICAgICAgICAgICAgIGFjY291bnRUeXBlOiBwYXlsb2FkLmFjY291bnRUeXBlLFxuICAgICAgICAgICAgICAgIGFjY291bnRJZDogcGF5bG9hZC51c2VySWQsXG4gICAgICAgICAgICAgICAgbmFtZTogcGF5bG9hZC5uYW1lLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBMb2dvdXQgPSAoKSA9PiB7XG4gICAgICAgICR3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ25iYXNscCcpO1xuICAgIH07XG5cbiAgICBjb25zdCBzaWduVXAgPSAodXNlcikgPT4ge1xuICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9zaWdudXAnLCB1c2VyKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBzYXZlVG9rZW4oZGF0YS50b2tlbik7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBjb25zdCBzaWduSW4gPSAodXNlcikgPT4ge1xuICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9zaWduaW4nLCB1c2VyKS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBzYXZlVG9rZW4oZGF0YS50b2tlbik7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBjb25zdCBoYW5kbGVTdWNjZXNzID0gKHJlc3BvbnNlKSA9PiByZXNwb25zZTtcblxuICAgIGNvbnN0IGhhbmRsZUVycm9yID0gKHJlc3BvbnNlKSA9PiByZXNwb25zZTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGN1cnJlbnRVc2VyOiBjdXJyZW50VXNlcixcbiAgICAgICAgc2F2ZVRva2VuOiBzYXZlVG9rZW4sXG4gICAgICAgIGdldFRva2VuOiBnZXRUb2tlbixcbiAgICAgICAgaXNMb2dnZWRJbjogaXNMb2dnZWRJbixcbiAgICAgICAgc2lnblVwOiBzaWduVXAsXG4gICAgICAgIHNpZ25Jbjogc2lnbkluLFxuICAgICAgICBMb2dvdXQ6IExvZ291dCxcbiAgICB9O1xufVxuXG4iLCIvKlxufC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbnwgc2V0dGluZyB1cCBhY2NvdW50IHNlcnZpY2UgZm9yIGFwcFxufCBAYXV0aG9yOiBqYWhpZCBoYXF1ZSA8amFoaWQuaGFxdWVAeWFob28uY29tPlxufCBAY29weXJpZ2h0OiBuYmEtc2xwLCAyMDE3XG58LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKCkge1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnbmJhc2xwJylcbiAgICAgICAgLnNlcnZpY2UoJ2FjY291bnQnLCBhY2NvdW50KTtcblxuICAgIGFjY291bnQuJGluamVjdCA9IFsnJHdpbmRvdycsICckaHR0cCddO1xuXG4gICAgZnVuY3Rpb24gYWNjb3VudCgkd2luZG93LCAkaHR0cCkge1xuXG4gICAgICAgIGNvbnN0IGdldEFjY291bnRTdGF0dXNlcyA9ICh1c2VySWQpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cCBcbiAgICAgICAgICAgICAgICAuZ2V0KCcvYXBpLycgKyB1c2VySWQgKyAnL3N0YXR1c2VzJylcbiAgICAgICAgICAgICAgICAudGhlbihoYW5kbGVTdWNjZXNzKVxuICAgICAgICAgICAgICAgIC5jYXRjaChoYW5kbGVFcnJvcik7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgdXBkYXRlVXNlclN0YXR1cyA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHBcbiAgICAgICAgICAgICAgICAucG9zdCgnL2FwaS91c2Vyc3RhdHVzJywgZGF0YSlcbiAgICAgICAgICAgICAgICAudGhlbihoYW5kbGVTdWNjZXNzKVxuICAgICAgICAgICAgICAgIC5jYXRjaChoYW5kbGVFcnJvcik7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3Qgc2F2ZUJhc2ljSW5mbyA9IChkYXRhKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAgXG4gICAgICAgICAgICAgICAgLnBvc3QoJy9hcGkvY3JlYXRlYmFzaWNwcm9maWxlJywgZGF0YSlcbiAgICAgICAgICAgICAgICAudGhlbihoYW5kbGVTdWNjZXNzKVxuICAgICAgICAgICAgICAgIC5jYXRjaChoYW5kbGVFcnJvcik7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3Qgc2F2ZUJyYW5jaEluZm8gPSAodXNlcklkLCBkYXRhKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHBcbiAgICAgICAgICAgICAgICAucG9zdCgnL2FwaS8nICsgdXNlcklkICsgJy9zYXZlYnJhbmNoaW5mbycsIGRhdGEpXG4gICAgICAgICAgICAgICAgLnRoZW4oaGFuZGxlU3VjY2VzcylcbiAgICAgICAgICAgICAgICAuY2F0Y2goaGFuZGxlRXJyb3IpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGhhbmRsZVN1Y2Nlc3MgPSAocmVzcG9uc2UpID0+IHJlc3BvbnNlO1xuXG4gICAgICAgIGNvbnN0IGhhbmRsZUVycm9yID0gKHJlc3BvbnNlKSA9PiByZXNwb25zZTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZ2V0QWNjb3VudFN0YXR1c2VzOiBnZXRBY2NvdW50U3RhdHVzZXMsXG4gICAgICAgICAgICB1cGRhdGVVc2VyU3RhdHVzOiB1cGRhdGVVc2VyU3RhdHVzLFxuICAgICAgICAgICAgc2F2ZUJhc2ljSW5mbzogc2F2ZUJhc2ljSW5mbyxcbiAgICAgICAgICAgIHNhdmVCcmFuY2hJbmZvOiBzYXZlQnJhbmNoSW5mbyxcbiAgICAgICAgfTtcbiAgICB9XG5cbn0pKCk7XG4iLCIvKlxufC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbnwgc2V0dGluZyB1cCBzZXJ2aWNlIGZvciBzaXRlLWNvbnRyb2xsZXIgZm9yIGFkbWluXG58IEBhdXRob3I6IGphaGlkIGhhcXVlIDxqYWhpZC5oYXF1ZUB5YWhvby5jb20+XG58IEBjb3B5cmlnaHQ6IG5iYS1zbHAsIDIwMThcbnwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4qL1xuXG4ndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbiAoKSB7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ25iYXNscCcpXG4gICAgICAgIC5zZXJ2aWNlKCdzaXRlY29udHJvbGxlcicsIHNpdGVjb250cm9sbGVyKTtcblxuICAgIHNpdGVjb250cm9sbGVyLiRpbmplY3QgPSBbJyRodHRwJ107XG5cbiAgICBmdW5jdGlvbiBzaXRlY29udHJvbGxlcigkaHR0cCkge1xuICAgICAgICBcbiAgICAgICAgY29uc3QgYWRkUHJlZmVycmVkQ29tbWl0dGVlID0gKGRhdGEpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cFxuICAgICAgICAgICAgICAgIC5wb3N0KCcvYXBpL2NyZWF0ZWNvbW1pdHRlZScsIGRhdGEpXG4gICAgICAgICAgICAgICAgLnRoZW4oaGFuZGxlU3VjY2VzcylcbiAgICAgICAgICAgICAgICAuY2F0Y2goaGFuZGxlRXJyb3IpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGhhbmRsZVN1Y2Nlc3MgPSAocmVzcG9uc2UpID0+IHJlc3BvbnNlO1xuXG4gICAgICAgIGNvbnN0IGhhbmRsZUVycm9yID0gKHJlc3BvbnNlKSA9PiByZXNwb25zZTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYWRkUHJlZmVycmVkQ29tbWl0dGVlOiBhZGRQcmVmZXJyZWRDb21taXR0ZWUsXG4gICAgICAgIH07XG5cbiAgICB9XG5cbn0pKCk7XG4iLCIvKlxufC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbnwgc2V0dGluZyB1cCBuYXZpZ2F0aW9uIGRpcmVjdGl2ZSBmb3IgdGhlIGFwcFxufCBAYXV0aG9yOiBqYWhpZCBoYXF1ZSA8amFoaWQuaGFxdWVAeWFob28uY29tPlxufCBAY29weXJpZ2h0OiBuYmFzbHAsIDIwMTdcbnwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4qL1xuXG4ndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbiAoKSB7XG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCduYmFzbHAnKVxuICAgICAgICAuZGlyZWN0aXZlKCdzaXRlTmF2Jywgc2l0ZU5hdik7XG5cbiAgICBmdW5jdGlvbiBzaXRlTmF2KCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbW1vbi9kaXJlY3RpdmVzL25hdi9zaXRlLW5hdi50ZW1wbGF0ZS5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICduYXZDdHJsIGFzIG52bScsXG4gICAgICAgIH07XG4gICAgfVxufSkoKTtcbiIsIi8qXG58LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxufCBzZXR0aW5nIHVwIGNvbnRyb2xsZXIgZm9yIG5hdmlnYXRpb25cbnwgQGF1dGhvcjogamFoaWQgaGFxdWUgPGphaGlkLmhhcXVlQHlhaG9vLmNvbT5cbnwgQGNvcHlyaWdodDogbmJhc2xwLCAyMDE3XG58LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKCkge1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnbmJhc2xwJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ25hdkN0cmwnLCBuYXZDdHJsKTtcblxuICAgIG5hdkN0cmwuJGluamVjdCA9IFsnYXV0aGVudGljYXRpb24nLCAnJGxvY2F0aW9uJ107XG5cbiAgICBmdW5jdGlvbiBuYXZDdHJsKGF1dGhlbnRpY2F0aW9uLCAkbG9jYXRpb24pIHtcbiAgICAgICAgY29uc3QgbnZtID0gdGhpcztcblxuICAgICAgICBpZiAoYXV0aGVudGljYXRpb24uaXNMb2dnZWRJbigpKSB7XG4gICAgICAgICAgICBudm0ubG9nZ2VkSW5VcmkgPSB0cnVlO1xuICAgICAgICAgICAgbnZtLmxvZ2dlZEluTmFtZSA9IGF1dGhlbnRpY2F0aW9uLmN1cnJlbnRVc2VyKCkubmFtZTtcblxuICAgICAgICAgICAgbnZtLmN1cnJlbnRBY2NvdW50VHlwZSA9IGF1dGhlbnRpY2F0aW9uLmN1cnJlbnRVc2VyKCkuYWNjb3VudFR5cGU7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhudm0uY3VycmVudEFjY291bnRUeXBlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG52bS5sb2dnZWRJblVyaSA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgbnZtLmxvZ291dCA9ICgpID0+IHtcbiAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uLkxvZ291dCgpO1xuICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy9zaWduaW4nKTtcbiAgICAgICAgfTtcbiAgICB9XG59KSgpO1xuIiwiLypcbnwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG58IHNldHRpbmcgdXAgZm9vdGVyIGRpcmVjdGl2ZSBmb3IgYXBwbGljYXRpb25cbnwgQGF1dGhvcjogamFoaWQgaGFxdWUgPGphaGlkLmhhcXVlQHlhaG9vLmNvbT5cbnwgQGNvcHlyaWdodDogbmJhc2xwLCAyMDE3XG58LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKCkge1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnbmJhc2xwJylcbiAgICAgICAgLmRpcmVjdGl2ZSgnc2l0ZUZvb3RlcicsIHNpdGVGb290ZXIpO1xuICAgIGZ1bmN0aW9uIHNpdGVGb290ZXIoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0VBJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY29tbW9uL2RpcmVjdGl2ZXMvZm9vdGVyL2Zvb3Rlci50ZW1wbGF0ZS5odG1sJyxcbiAgICAgICAgfTtcbiAgICB9XG59KSgpO1xuIiwiLypcbnwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG58IHNldHRpbmcgdXAgY29udHJvbGxlciBmb3Igd2VsY29tZSBwYWdlXG58IEBhdXRob3I6IGphaGlkIGhhcXVlIDxqYWhpZC5oYXF1ZUB5YWhvby5jb20+XG58IEBjb3B5cmlnaHQ6IG5iYXNscCwgMjAxN1xufC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiovXG5cbid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uICgpIHtcbiAgICBcbiAgICBhbmd1bGFyIFxuICAgICAgICAubW9kdWxlKCduYmFzbHAnKVxuICAgICAgICAuY29udHJvbGxlcignd2VsY29tZUN0cmwnLCB3ZWxjb21lQ3RybCk7XG5cbiAgICB3ZWxjb21lQ3RybC4kaW5qZWN0ID0gWydhdXRoZW50aWNhdGlvbicsICckbG9jYXRpb24nXTtcblxuICAgIGZ1bmN0aW9uIHdlbGNvbWVDdHJsKGF1dGhlbnRpY2F0aW9uLCAkbG9jYXRpb24pIHtcbiAgICAgICAgY29uc3Qgd3ZtID0gdGhpcztcbiAgICB9XG5cbn0pKCk7XG4iLCIvKlxufC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbnwgc2V0dGluZyB1cCBzaWdudXAgY29udHJvbGxlciBmb3IgdGhlIGFwcFxufCBAYXV0aG9yOiBqYWhpZCBoYXF1ZSA8amFoaWQuaGFxdWVAeWFob28uY29tPlxufCBAY29weXJpZ2h0OiBuYmFzbHAsIDIwMTdcbnwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4qL1xuXG4ndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbiAoKSB7XG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCduYmFzbHAnKVxuICAgICAgICAuY29udHJvbGxlcignc2lnbnVwQ3RybCcsIHNpZ251cEN0cmwpO1xuXG4gICAgc2lnbnVwQ3RybC4kaW5qZWN0ID0gWydhdXRoZW50aWNhdGlvbicsICckbG9jYXRpb24nXTtcblxuICAgIGZ1bmN0aW9uIHNpZ251cEN0cmwoYXV0aGVudGljYXRpb24sICRsb2NhdGlvbikge1xuICAgICAgICBjb25zdCByZWd2bSA9IHRoaXM7XG5cbiAgICAgICAgLy8gdXNlciBvYmplY3QuXG4gICAgICAgIHJlZ3ZtLnVzZXIgPSB7XG4gICAgICAgICAgICBmaXJzdE5hbWU6ICcnLFxuICAgICAgICAgICAgbGFzdE5hbWU6ICcnLFxuICAgICAgICAgICAgZGlzcGxheU5hbWU6ICcnLFxuICAgICAgICAgICAgZW1haWw6ICcnLFxuICAgICAgICAgICAgcGFzc3dvcmQ6ICcnLFxuICAgICAgICAgICAgY29uZmlybVBhc3N3b3JkOiAnJyxcbiAgICAgICAgfTtcblxuICAgICAgICByZWd2bS5yZWdpc3RlciA9ICgpID0+IHtcbiAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICAgICAgLnNpZ25VcChyZWd2bS51c2VyKVxuICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5lcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVndm0uUmVnaXN0cmF0aW9uRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVndm0uUmVnaXN0cmF0aW9uRXJyb3JNc2cgPSByZXNwb25zZS5kYXRhLmVycm9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVndm0uUmVnaXN0cmF0aW9uRXJyb3IgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvd2VsY29tZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWd2bS5SZWdpc3RyYXRpb25FcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWd2bS5SZWdpc3RyYXRpb25FcnJvck1zZyA9IGVyci5kYXRhLmVycm9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGF1dGhlbnRpY2F0aW9uLmlzTG9nZ2VkSW4oKSkge1xuICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy93ZWxjb21lJyk7XG4gICAgICAgIH1cbiAgICB9XG59KSgpO1xuIiwiLypcbnwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG58IHNldHRpbmcgdXAgY29udHJvbGxlciBmb3IgbG9naW4gcGFnZVxufCBAYXV0aG9yOiBqYWhpZCBoYXF1ZSA8amFoaWQuaGFxdWVAeWFob28uY29tPlxufCBAY29weXJpZ2h0OiBuYmFzbHAsIDIwMTdcbnwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4qL1xuXG4ndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbiAoKSB7XG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCduYmFzbHAnKVxuICAgICAgICAuY29udHJvbGxlcignc2lnbmluQ3RybCcsIHNpZ25pbkN0cmwpO1xuXG4gICAgc2lnbmluQ3RybC4kaW5qZWN0ID0gWydhdXRoZW50aWNhdGlvbicsICckbG9jYXRpb24nXTtcblxuICAgIGZ1bmN0aW9uIHNpZ25pbkN0cmwoYXV0aGVudGljYXRpb24sICRsb2NhdGlvbikge1xuICAgICAgICBjb25zdCBsdm0gPSB0aGlzO1xuXG4gICAgICAgIGx2bS51c2VyID0ge1xuICAgICAgICAgICAgZW1haWw6ICcnLFxuICAgICAgICAgICAgcGFzc3dvcmQ6ICcnLFxuICAgICAgICB9OyBcblxuICAgICAgICBpZiAoYXV0aGVudGljYXRpb24uaXNMb2dnZWRJbigpKSB7XG4gICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnL3dlbGNvbWUnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGx2bS5sb2dpbiA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWx2bS51c2VyLmVtYWlsIHx8ICFsdm0udXNlci5wYXNzd29yZCkge1xuICAgICAgICAgICAgICAgICAgICBsdm0ubG9naW5FcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGx2bS5sb2dpbkVycm9yTXNnID0gYEVycm9yISBhbGwgKiBmaWVsZHMgYXJlIHJlcXVpcmVkYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGx2bS5sb2dpbkVycm9yID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGx2bS5kb0xvZ2luKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgbHZtLmRvTG9naW4gPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgICAgICAgICAgLnNpZ25Jbihsdm0udXNlcilcbiAgICAgICAgICAgICAgICAgICAgLmVycm9yKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGx2bS5sb2dpbkVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGx2bS5sb2dpbkVycm9yTXNnID0gZXJyLmVycm9yO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnL3dlbGNvbWUnKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG59KSgpO1xuIiwiLypcbnwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG58IHNldHRpbmcgdXAgY29udHJvbGxlciBmb3IgcHJvZmlsZSBwYWdlXG58IEBhdXRob3I6IGphaGlkIGhhcXVlIDxqYWhpZC5oYXF1ZUB5YWhvby5jb20+XG58IEBjb3B5cmlnaHQ6IG5iYS1zbHAsIDIwMTdcbnwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4qL1xuXG4ndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbiAoKSB7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ25iYXNscCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdwcm9maWxlQ3RybCcsIHByb2ZpbGVDdHJsKTtcblxuICAgIHByb2ZpbGVDdHJsLiRpbmplY3QgPSBbJ2F1dGhlbnRpY2F0aW9uJywgJyRsb2NhdGlvbicsICdhY2NvdW50JywgJyRyb3V0ZSddO1xuXG4gICAgZnVuY3Rpb24gcHJvZmlsZUN0cmwoYXV0aGVudGljYXRpb24sICRsb2NhdGlvbiwgYWNjb3VudCwgJHJvdXRlKSB7XG5cbiAgICAgICAgY29uc3QgcHJvdm0gPSB0aGlzO1xuXG4gICAgICAgIGlmIChhdXRoZW50aWNhdGlvbi5pc0xvZ2dlZEluKCkpIHtcbiAgICAgICAgICAgIHByb3ZtLnByb2ZpbGVTdGF0dXMgPSBhdXRoZW50aWNhdGlvbi5jdXJyZW50VXNlcigpLmFjY291bnRTdGF0dXM7XG5cbiAgICAgICAgICAgIHByb3ZtLmN1cnJlbnRBY2NvdW50VHlwZSA9IGF1dGhlbnRpY2F0aW9uLmN1cnJlbnRVc2VyKCkuYWNjb3VudFR5cGU7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGNoZWNraW5nIGFjY291bnQgdHlwZVxuICAgICAgICAgICAgaWYgKGF1dGhlbnRpY2F0aW9uLmN1cnJlbnRVc2VyKCkuYWNjb3VudFR5cGUgPT09ICdjdXN0b21lcicpIHtcblxuICAgICAgICAgICAgICAgIC8vIGdldCB1c2VyIGFjY291bnQgc3RhdHVlcyBcbiAgICAgICAgICAgICAgICBwcm92bS5nZXRQcm9maWxlU3RhdHVzZXMgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGFjY291bnRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5nZXRBY2NvdW50U3RhdHVzZXMoYXV0aGVudGljYXRpb24uY3VycmVudFVzZXIoKS5lbWFpbClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5lcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm92bS5zdGF0dXNMb2FkRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm92bS5zdGF0dXNMb2FkRXJyb3JNc2cgPSByZXNwb25zZS5kYXRhLmVycm9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvdm0uc3RhdHVzTG9hZEVycm9yID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3ZtLnVzZXJTdGF0dXNlcyA9IHJlc3BvbnNlLmRhdGEuc3RhdHVzZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3ZtLnN0YXR1c0xvYWRFcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvdm0uc3RhdHVzTG9hZEVycm9yTXNnID0gZXJyO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8vIHNhdmluZyBiYXNpYyBwcm9maWxlIGluZm9cbiAgICAgICAgICAgICAgICBwcm92bS5iYXNpY1Byb2ZpbGUgPSB7XG4gICAgICAgICAgICAgICAgICAgIHdob3M6IGF1dGhlbnRpY2F0aW9uLmN1cnJlbnRVc2VyKCkuZW1haWwsXG4gICAgICAgICAgICAgICAgICAgIHVzZXJJZDogYXV0aGVudGljYXRpb24uY3VycmVudFVzZXIoKS51c2VySWQsXG4gICAgICAgICAgICAgICAgICAgIGZvcm1lck5hbWU6ICcnLFxuICAgICAgICAgICAgICAgICAgICBzZXg6ICcnLFxuICAgICAgICAgICAgICAgICAgICB0ZWxlOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgYWRkcmVzczogJycsXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHByb3ZtLnNhdmVCYXNpY0luZm8gPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGFjY291bnRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zYXZlQmFzaWNJbmZvKHByb3ZtLmJhc2ljUHJvZmlsZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3ZtLmJhc2ljQWNjb3VudEluZm9FcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3ZtLmJhc2ljQWNjb3VudEluZm9FcnJvck1zZyA9IHJlc3BvbnNlLmRhdGEuZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZFN0YXR1cyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZV9hdDogJ2Jhc2ljX2luZm8nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6IGF1dGhlbnRpY2F0aW9uLmN1cnJlbnRVc2VyKCkuZW1haWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbGluZyBzZXJ2aWNlIGZ1bmN0aW9uLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudXBkYXRlVXNlclN0YXR1cyh1cGRhdGVkU3RhdHVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnVwZGF0ZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvdm0uc3RhdHVzVXBkYXRlRXJyb3IgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvdXRlLnJlbG9hZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvdm0uYmFzaWNBY2NvdW50SW5mb0Vycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvdm0uYmFzaWNBY2NvdW50SW5mb0Vycm9yTXNnID0gcmVzcG9uc2UuZGF0YS5lcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvdm0uc3RhdHVzVXBkYXRlRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3ZtLmJhc2ljQWNjb3VudEluZm9FcnJvck1zZyA9IGVycjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcHJvdm0uYnJhbmNoID0ge1xuICAgICAgICAgICAgICAgICAgICB5ZWFyOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgYnJhbmNoOiAnJyxcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLy8gYWRkaW5nIGJyYW5jaCBpbmZvXG4gICAgICAgICAgICAgICAgcHJvdm0uc2F2ZUJhdGNoSW5mbyA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNhdmVCcmFuY2hJbmZvKGF1dGhlbnRpY2F0aW9uLmN1cnJlbnRVc2VyKCkuZW1haWwsIHByb3ZtLmJyYW5jaClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5lcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm92bS5icmFuY2hJbmZvRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm92bS5icmFuY2hJbmZvRXJyb3JNc2cgPSByZXNwb25zZS5kYXRhLmVycm9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChyZXNwb25zZS5kYXRhLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvdm0uYnJhbmNoSW5mb0Vycm9yID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3ZtLmJyYW5jaFN1Y2Nlc3MgPSAnQnJhbmNoIGluZm9ybWF0aW9uIGhhc2UgYmVlbiBzdWNjZXNzZnVsbHkgYWRkZWQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm92bS5icmFuY2hJbmZvRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3ZtLmJyYW5jaEluZm9FcnJvck1zZyA9IGVycjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChhdXRoZW50aWNhdGlvbi5jdXJyZW50VXNlcigpLmFjY291bnRUeXBlID09PSAnYWRtaW4nKSB7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvc2lnbmluJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbn0pKCk7XG4iLCIvKlxufC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbnwgc2V0dGluZyB1cCBjb250cm9sbGVyIGZvciBzaXRlLWNvbnRyb2xsIHBhZ2VcbnwgQGF1dGhvcjogamFoaWQgaGFxdWUgPGphaGlkLmhhcXVlQHlhaG9vLmNvbT5cbnwgQGNvcHlyaWdodDogbmJhLXNscCwgMjAxOFxufC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiovXG5cbid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uICgpIHtcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnbmJhc2xwJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ3NpdGVjb250cm9sbEN0cmwnLCBzaXRlY29udHJvbGxDdHJsKTtcblxuICAgIHNpdGVjb250cm9sbEN0cmwuJGluamVjdCA9IFsnYXV0aGVudGljYXRpb24nLCAnJGxvY2F0aW9uJywgJ3NpdGVjb250cm9sbGVyJ107XG5cbiAgICBmdW5jdGlvbiBzaXRlY29udHJvbGxDdHJsKGF1dGhlbnRpY2F0aW9uLCAkbG9jYXRpb24sIHNpdGVjb250cm9sbGVyKSB7XG4gICAgICAgIGNvbnN0IGFkU2l0ZSA9IHRoaXM7XG5cbiAgICAgICAgaWYgKGF1dGhlbnRpY2F0aW9uLmlzTG9nZ2VkSW4oKSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoYXV0aGVudGljYXRpb24uY3VycmVudFVzZXIoKS5hY2NvdW50VHlwZSA9PT0gJ2FkbWluJykge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGFkU2l0ZS5jb21taXR0ZWUgPSB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICcnLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgLy8gYWRkIGNvbW1pdHRlZVxuICAgICAgICAgICAgICAgIGFkU2l0ZS5hZGRQcmVmZXJyZWRDb21taXR0ZWUgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNpdGVjb250cm9sbGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkUHJlZmVycmVkQ29tbWl0dGVlKGFkU2l0ZS5jb21taXR0ZWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvd2VsY29tZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy9zaWduaW4nKTtcbiAgICAgICAgfVxuICAgIH1cblxufSkoKTsiXX0=
