"use strict";!function(){angular.module("nbaslp",["ngResource","ngRoute"]).config(["$routeProvider","$locationProvider",function(e,l){e.when("/",{templateUrl:"home/welcome/welcome.view.html",controller:"welcomeCtrl",controllerAs:"wvm"}).when("/signup",{templateUrl:"signup/signup.view.html",controller:"signupCtrl",controllerAs:"regvm"}).when("/signin",{templateUrl:"signin/signin.view.html",controller:"signinCtrl",controllerAs:"lvm"}).when("/welcome",{templateUrl:"welcome/welcome.view.html"}),l.html5Mode({enabled:!0})}])}();
"use strict";function authentication(n,t){var e=function(t){n.localStorage.nbaslp=t},i=function(){return n.localStorage.nbaslp},o=function(){var t=i(),e=void 0;return!!t&&(e=t.split(".")[1],e=n.atob(e),e=JSON.parse(e))};return{currentUser:function(){if(o){var t=i().split(".")[1];return t=n.atob(t),t=JSON.parse(t),{userId:t._id,email:t.email,accountId:t.userId,name:t.name}}return!1},saveToken:e,getToken:i,isLoggedIn:o,signUp:function(n){return t.post("/api/signup",n).success(function(n){e(n.token)})},signIn:function(n){return t.post("/api/signin",n).success(function(n){e(n.token)})},Logout:function(){n.localStorage.removeItem("nbaslp")}}}angular.module("nbaslp").service("authentication",authentication),authentication.$inject=["$window","$http"];
"use strict";!function(){angular.module("nbaslp").directive("siteNav",function(){return{restrict:"EA",templateUrl:"common/directives/nav/site-nav.template.html",controller:"navCtrl as nvm"}})}();
"use strict";!function(){function n(n,t){n.isLoggedIn()?(this.loggedInUri=!0,this.loggedInName=n.currentUser().name):this.loggedInUri=!1,this.logout=function(){n.Logout(),t.path("/signin")}}angular.module("nbaslp").controller("navCtrl",n),n.$inject=["authentication","$location"]}();
"use strict";!function(){angular.module("nbaslp").directive("siteFooter",function(){return{restrict:"EA",templateUrl:"common/directives/footer/footer.template.html"}})}();
"use strict";!function(){angular.module("nbaslp").controller("welcomeCtrl",function(){})}();
"use strict";!function(){function r(r,t){var o=this;o.user={firstName:"",lastName:"",displayName:"",email:"",password:"",confirmPassword:""},o.register=function(){r.signUp(o.user).then(function(r){r.data.error?(o.RegistrationError=!0,o.RegistrationErrorMsg=r.data.error):(o.RegistrationError=!1,t.path("/welcome"))}).catch(function(r){r&&(o.RegistrationError=!0,o.RegistrationErrorMsg=r.data.error)})},r.isLoggedIn()&&t.path("/welcome")}angular.module("nbaslp").controller("signupCtrl",r),r.$inject=["authentication","$location"]}();
"use strict";!function(){function r(r,o){var n=this;n.user={email:"",password:""},r.isLoggedIn()?o.path("/welcome"):(n.login=function(){n.user.email&&n.user.password?(n.loginError=!1,n.doLogin()):(n.loginError=!0,n.loginErrorMsg="Error! all * fields are required")},n.doLogin=function(){r.signIn(n.user).error(function(r){n.loginError=!0,n.loginErrorMsg=r.error}).then(function(){o.path("/welcome")})})}angular.module("nbaslp").controller("signinCtrl",r),r.$inject=["authentication","$location"]}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImF1dGhlbnRpY2F0aW9uLnNlcnZpY2UuanMiLCJuYXYuZGlyZWN0aXZlLmpzIiwibmF2LmNvbnRyb2xsZXIuanMiLCJmb290ZXIuZGlyZWN0aXZlLmpzIiwid2VsY29tZS5jb250cm9sbGVyLmpzIiwic2lnbnVwLmNvbnRyb2xsZXIuanMiLCJzaWduaW4uY29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwidGVtcGxhdGVVcmwiLCIkbG9jYXRpb25Qcm92aWRlciIsImNvbnRyb2xsZXIiLCJjb250cm9sbGVyQXMiLCJ3aGVuIiwiaHRtbDVNb2RlIiwiZW5hYmxlZCIsInNhdmVUb2tlbiIsIiR3aW5kb3ciLCJ0b2tlbiIsImxvY2FsU3RvcmFnZSIsImdldFRva2VuIiwiaXNMb2dnZWRJbiIsInBheWxvYWQiLCJKU09OIiwicGFyc2UiLCJhdG9iIiwiY3VycmVudFVzZXIiLCJzcGxpdCIsImFjY291bnRJZCIsInVzZXJJZCIsIl9pZCIsIm5hbWUiLCJlbWFpbCIsIkxvZ291dCIsInNpZ25VcCIsInVzZXIiLCIkaHR0cCIsInBvc3QiLCJzdWNjZXNzIiwiZGF0YSIsInNpZ25JbiIsImhhbmRsZVN1Y2Nlc3MiLCJyZW1vdmVJdGVtIiwiYXV0aGVudGljYXRpb24iLCJkaXJlY3RpdmUiLCJzaXRlTmF2IiwicmVzdHJpY3QiLCJuYXZDdHJsIiwiJGxvY2F0aW9uIiwibnZtIiwibG9nZ2VkSW5OYW1lIiwibG9nZ2VkSW5VcmkiLCJsb2dvdXQiLCJwYXRoIiwiJGluamVjdCIsInNpdGVGb290ZXIiLCJzaWdudXBDdHJsIiwicmVndm0iLCJ0aGlzIiwibGFzdE5hbWUiLCJkaXNwbGF5TmFtZSIsInBhc3N3b3JkIiwiY29uZmlybVBhc3N3b3JkIiwicmVnaXN0ZXIiLCJyZXNwb25zZSIsIlJlZ2lzdHJhdGlvbkVycm9yTXNnIiwidGhlbiIsIlJlZ2lzdHJhdGlvbkVycm9yIiwiZXJyb3IiLCJjYXRjaCIsImVyciIsInNpZ25pbkN0cmwiLCJsdm0iLCJsb2dpbkVycm9yTXNnIiwibG9naW5FcnJvciIsImRvTG9naW4iXSwibWFwcGluZ3MiOiJBQVFBLGNBRUEsV0FDSUEsUUFDS0MsT0FBTyxVQUFXLGFBQWMsWUFHckNDLFFBQVNBLGlCQUFULG9CQUdZQyxTQUFBQSxFQUFhQyxHQUNiQyxFQUNBQyxLQUFBQSxLQUVFSCxZQUFXLGlDQUNiQSxXQUFhLGNBQ2JFLGFBQVksUUFHZkUsS0FBSyxXQUNGSixZQUFhLDBCQUNiRSxXQUFZLGFBQ1pDLGFBQWMsVUFHZEgsS0FBQUEsV0FqQlJBLFlBQUEsMEJBYVFFLFdBQVksYUFPcEJELGFBQWtCSSxRQUFsQkQsS0FBQSxZQUdISixZQUFBLDhCQUhHQyxFQUFrQkksV0FDZEMsU0FBUyxPQTNCckI7QUNGQSxhQVVJLFNBQU1DLGVBQVlDLEVBQVpELEdBRUwsSUFGREEsRUFBQSxTQUFBRSxHQUNJRCxFQUFRRSxhQUFSLE9BQWlDRCxHQUdyQ0UsRUFBQSxXQUNJLE9BQU9ILEVBQVFFLGFBQVIsUUFLUEUsRUFBSUMsV0FESixJQUFNSixFQUFRRSxJQUdWRixPQUFBQSxFQUVBSSxRQUFBQSxJQUNBQSxFQUFVQyxFQUFLQyxNQUFNRixLQUFBQSxHQUNyQkEsRUFBT0EsRUFBUEcsS0FBQUgsR0FKSkEsRUFNS0MsS0FBQUMsTUFBQUYsS0E0Q1QsT0FDSUksWUFyQ1FKLFdBQ0pBLEdBQUFBLEVBQVVMLENBQ1ZLLElBRklBLEVBRU1DLElBRlVJLE1BQU0sS0FBSyxHQU8zQkMsT0FISk4sRUFBT0wsRUFBQVEsS0FBQUgsR0FDSE8sRUFBQUEsS0FBUVAsTUFBUVEsSUFHaEJDLE9BQU1ULEVBQVFTLElBSmxCQyxNQUFBVixFQUFBVSxNQU9DSixVQUFBTixFQUFBTyxPQUNERSxLQUFPVCxFQUFQUyxNQUlGRSxPQUFTLEdBc0JYakIsVUFBV0EsRUFDWEksU0FBVUEsRUFDVkMsV0FBWUEsRUFDWmEsT0FyQkosU0FBQUMsR0FDSSxPQUFPQyxFQUFNQyxLQUFLLGNBQWVGLEdBQU1HLFFBQVEsU0FBVUMsR0FLdkRDLEVBQVNELEVBQVRDLFVBZ0JGQSxPQWhCSixTQUFBTCxHQUNJLE9BQU9DLEVBQU1DLEtBQUssY0FBZUYsR0FBTUcsUUFBUSxTQUFVQyxHQUt2REUsRUFBQUEsRUFBZ0J2QixVQVdsQmUsT0F2QlcsV0FDWGhCLEVBQU9tQixhQUFXTSxXQUFYLFlBdkRmcEMsUUFDS0MsT0FBTyxVQUdab0MsUUFBQUEsaUJBQTBCQSxnQkFFMUJBLGVBQVNBLFNBQWUxQixVQUFTbUI7QUNSakMsY0FFQSxXQUNJOUIsUUFDS0MsT0FBTyxVQUdacUMsVUFBU0MsVUFFREMsV0FDQXJDLE9BQ0FFLFNBQUFBLEtBSEpGLFlBQUEsK0NBS0hFLFdBQUEsb0JBWEw7QUNGQSxjQUVBLFdBT0ksU0FBU29DLEVBQVFKLEVBQWdCSyxHQUt6QkMsRUFBSUMsY0FGSlAsS0FJQ1EsYUFBQSxFQUpEUixLQUtJUSxhQUFjUixFQUFsQmpCLGNBQUFLLE1BTEFZLEtBUUFTLGFBQVMsRUFSVFQsS0FRSlMsT0FBQSxXQUlIVCxFQUFBVixTQXRCTGUsRUFBQUssS0FBQSxZQUNJL0MsUUFDS0MsT0FBTyxVQUdad0MsV0FBQSxVQUFtQkEsR0FFbkJBLEVBQUFPLFNBQWlCWCxpQkFBZ0JLLGFBUHJDO0FDRkEsY0FFQSxXQUNJMUMsUUFHQUMsT0FBU2dELFVBQ0xYLFVBQU8sYUFDSEUsV0FDQXJDLE9BRkpxQyxTQUFBLEtBSUhyQyxZQUFBLG1EQVRMO0FDSEEsY0FDQSxXQUFDSCxRQUNBQSxPQUNFQyxVQUNBSSxXQUFXLGNBR1osY0FORjtBQ0FBLGNBRUEsV0FPSSxTQUFTNkMsRUFBV2IsRUFBZ0JLLEdBR2hDLElBQUFTLEVBQUFDLEtBR0lDLEVBQUFBLE1BQ0FDLFVBQUFBLEdBQ0E1QixTQUpTLEdBS1Q2QixZQUxTLEdBTVRDLE1BQUFBLEdBTkpELFNBQUEsR0FNSUMsZ0JBQWlCLElBT1RMLEVBQUFNLFNBQUlDLFdBQ0FQLEVBQ0FBLE9BQUFBLEVBQU1RLE1BRlZDLEtBQUEsU0FJS0YsR0FDRFAsRUFBTVUsS0FBQUEsT0FDTm5CLEVBQVVLLG1CQUFWLEVBQ0hJLEVBQUFRLHFCQUFBRCxFQUFBekIsS0FBQTZCLFFBSUdYLEVBQU1VLG1CQUFOLEVBQ0FWLEVBQU1RLEtBQUFBLGVBaEJ0QkksTUFBQSxTQUFBQyxHQWNnQkEsSUFPWjNCLEVBQWV0QixtQkFBYyxFQUNuQmdDLEVBQUtZLHFCQUFmSyxFQUFBL0IsS0FBQTZCLFVBREF6QixFQUFldEIsY0FDZjJCLEVBQVVLLEtBQUssWUF6Q3ZCL0MsUUFDS0MsT0FBTyxVQUdaaUQsV0FBV0YsYUFBV0UsR0FFdEJBLEVBQVNBLFNBQVdiLGlCQUFnQkssYUFQeEM7QUNGQSxjQUVBLFdBT0ksU0FBU3VCLEVBQVc1QixFQUFnQkssR0FHaEN3QixJQUFJckMsRUFBT3VCLEtBRVBHLEVBQUFBLE1BRko3QixNQUFBLEdBRUk2QixTQUFVLElBR2RsQixFQUdLdEIsYUFDRG1ELEVBQUFuQixLQUFZLGFBR0ptQixFQUFBQSxNQUFJQyxXQUZSRCxFQUlLckMsS0FBQUgsT0FBQXdDLEVBQUFyQyxLQUFBMEIsVUFDRFcsRUFBSUUsWUFBYSxFQUtyQkMsRUFBSkEsWUFMUUgsRUFBSUUsWUFBYSxFQUNqQkYsRUFBSUcsY0FBSkgscUNBVUNBLEVBQUFHLFFBQ0ssV0FDRjNCLEVBUFJSLE9BQUFnQyxFQUFBckMsTUFESmlDLE1BQUEsU0FBQUUsR0FXSEUsRUFBQUUsWUFBQSxFQUNKRixFQUFBQyxjQUFBSCxFQUFBRixRQUxnQkYsS0FBSyxXQUNGbEIsRUFBVUssS0FBSyxnQkFyQ25DL0MsUUFDS0MsT0FBTyxVQUdaZ0UsV0FBV2pCLGFBQVdpQixHQUV0QkEsRUFBU0EsU0FBVzVCLGlCQUFnQkssYUFQeEMiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG58LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxufCBzZXR0aW5nIHVwIGVudHJ5IHBvaW50IGZvciBhbmd1bGFyIGZyb250LWVuZFxufCBAYXV0aG9yOiBqYWhpZCBoYXF1ZSA8amFoaWQuaGFxdWVAeWFob28uY29tPlxufCBAY29weXJpZ2h0OiBuYmEtc2xwLCAyMDE3XG58LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKCkge1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnbmJhc2xwJywgWyduZ1Jlc291cmNlJywgJ25nUm91dGUnXSlcbiAgICAgICAgLmNvbmZpZyhbJyRyb3V0ZVByb3ZpZGVyJywgJyRsb2NhdGlvblByb3ZpZGVyJywgY29uZmlnXSk7XG5cbiAgICBmdW5jdGlvbiBjb25maWcoJHJvdXRlUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XG4gICAgICAgICRyb3V0ZVByb3ZpZGVyXG4gICAgICAgICAgICAud2hlbignLycsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2hvbWUvd2VsY29tZS93ZWxjb21lLnZpZXcuaHRtbCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3dlbGNvbWVDdHJsJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6ICd3dm0nLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC53aGVuKCcvc2lnbnVwJywge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2lnbnVwL3NpZ251cC52aWV3Lmh0bWwnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdzaWdudXBDdHJsJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6ICdyZWd2bScsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLndoZW4oJy9zaWduaW4nLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzaWduaW4vc2lnbmluLnZpZXcuaHRtbCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3NpZ25pbkN0cmwnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ2x2bScsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLndoZW4oJy93ZWxjb21lJywge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnd2VsY29tZS93ZWxjb21lLnZpZXcuaHRtbCcsXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUoe1xuICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgfVxufSkoKTtcbiIsIi8qXG58LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxufCBzZXR0aW5nIHVwIGF1dGhlbnRpY2F0aW9uIHNlcnZpY2UgXG58IEBhdXRob3I6IGphaGlkIGhhcXVlIDxqYWhpZC5oYXF1ZUB5YWhvby5jb20+XG58IEBjb3B5cmlnaHQ6IG5iYS1zbHAsIDIwMTdcbnwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4qL1xuXG4ndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCduYmFzbHAnKVxuICAgIC5zZXJ2aWNlKCdhdXRoZW50aWNhdGlvbicsIGF1dGhlbnRpY2F0aW9uKTtcblxuYXV0aGVudGljYXRpb24uJGluamVjdCA9IFsnJHdpbmRvdycsICckaHR0cCddO1xuXG5mdW5jdGlvbiBhdXRoZW50aWNhdGlvbigkd2luZG93LCAkaHR0cCkge1xuLy8gc2F2aW5nIHRva2VuLlxuICAgIGNvbnN0IHNhdmVUb2tlbiA9XHRmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgJHdpbmRvdy5sb2NhbFN0b3JhZ2VbJ25iYXNscCddID0gdG9rZW47XG4gICAgfTtcblxuICAgIGNvbnN0IGdldFRva2VuID1cdGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICR3aW5kb3cubG9jYWxTdG9yYWdlWyduYmFzbHAnXTtcbiAgICB9O1xuXG4gICAgY29uc3QgaXNMb2dnZWRJbiA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgdG9rZW4gPSBnZXRUb2tlbigpO1xuICAgICAgICBsZXQgcGF5bG9hZDtcblxuICAgICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgICAgIHBheWxvYWQgPSB0b2tlbi5zcGxpdCgnLicpWzFdO1xuICAgICAgICAgICAgcGF5bG9hZCA9ICR3aW5kb3cuYXRvYihwYXlsb2FkKTtcbiAgICAgICAgICAgIHBheWxvYWQgPSBKU09OLnBhcnNlKHBheWxvYWQpO1xuICAgICAgICAgICAgcmV0dXJuIHBheWxvYWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3QgY3VycmVudFVzZXIgPSAoKSA9PiB7XG4gICAgICAgIGlmIChpc0xvZ2dlZEluKSB7XG4gICAgICAgICAgICBjb25zdCB0b2tlbiA9IGdldFRva2VuKCk7XG4gICAgICAgICAgICBsZXQgcGF5bG9hZCA9IHRva2VuLnNwbGl0KCcuJylbMV07XG4gICAgICAgICAgICBwYXlsb2FkID0gJHdpbmRvdy5hdG9iKHBheWxvYWQpO1xuICAgICAgICAgICAgcGF5bG9hZCA9IEpTT04ucGFyc2UocGF5bG9hZCk7XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdXNlcklkOiBwYXlsb2FkLl9pZCxcbiAgICAgICAgICAgICAgICBlbWFpbDogcGF5bG9hZC5lbWFpbCxcbiAgICAgICAgICAgICAgICBhY2NvdW50SWQ6IHBheWxvYWQudXNlcklkLFxuICAgICAgICAgICAgICAgIG5hbWU6IHBheWxvYWQubmFtZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3QgTG9nb3V0ID0gKCkgPT4ge1xuICAgICAgICAkd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCduYmFzbHAnKTtcbiAgICB9O1xuXG4gICAgY29uc3Qgc2lnblVwID0gKHVzZXIpID0+IHtcbiAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvc2lnbnVwJywgdXNlcikuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgc2F2ZVRva2VuKGRhdGEudG9rZW4pO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgY29uc3Qgc2lnbkluID0gKHVzZXIpID0+IHtcbiAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvc2lnbmluJywgdXNlcikuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgc2F2ZVRva2VuKGRhdGEudG9rZW4pO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlU3VjY2VzcyA9IChyZXNwb25zZSkgPT4gcmVzcG9uc2U7XG5cbiAgICBjb25zdCBoYW5kbGVFcnJvciA9IChyZXNwb25zZSkgPT4gcmVzcG9uc2U7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBjdXJyZW50VXNlcjogY3VycmVudFVzZXIsXG4gICAgICAgIHNhdmVUb2tlbjogc2F2ZVRva2VuLFxuICAgICAgICBnZXRUb2tlbjogZ2V0VG9rZW4sXG4gICAgICAgIGlzTG9nZ2VkSW46IGlzTG9nZ2VkSW4sXG4gICAgICAgIHNpZ25VcDogc2lnblVwLFxuICAgICAgICBzaWduSW46IHNpZ25JbixcbiAgICAgICAgTG9nb3V0OiBMb2dvdXQsXG4gICAgfTtcbn1cblxuIiwiLypcbnwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG58IHNldHRpbmcgdXAgbmF2aWdhdGlvbiBkaXJlY3RpdmUgZm9yIHRoZSBhcHBcbnwgQGF1dGhvcjogamFoaWQgaGFxdWUgPGphaGlkLmhhcXVlQHlhaG9vLmNvbT5cbnwgQGNvcHlyaWdodDogbmJhc2xwLCAyMDE3XG58LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKCkge1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnbmJhc2xwJylcbiAgICAgICAgLmRpcmVjdGl2ZSgnc2l0ZU5hdicsIHNpdGVOYXYpO1xuXG4gICAgZnVuY3Rpb24gc2l0ZU5hdigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRUEnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21tb24vZGlyZWN0aXZlcy9uYXYvc2l0ZS1uYXYudGVtcGxhdGUuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnbmF2Q3RybCBhcyBudm0nLFxuICAgICAgICB9O1xuICAgIH1cbn0pKCk7XG4iLCIvKlxufC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbnwgc2V0dGluZyB1cCBjb250cm9sbGVyIGZvciBuYXZpZ2F0aW9uXG58IEBhdXRob3I6IGphaGlkIGhhcXVlIDxqYWhpZC5oYXF1ZUB5YWhvby5jb20+XG58IEBjb3B5cmlnaHQ6IG5iYXNscCwgMjAxN1xufC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiovXG5cbid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uICgpIHtcbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ25iYXNscCcpXG4gICAgICAgIC5jb250cm9sbGVyKCduYXZDdHJsJywgbmF2Q3RybCk7XG5cbiAgICBuYXZDdHJsLiRpbmplY3QgPSBbJ2F1dGhlbnRpY2F0aW9uJywgJyRsb2NhdGlvbiddO1xuXG4gICAgZnVuY3Rpb24gbmF2Q3RybChhdXRoZW50aWNhdGlvbiwgJGxvY2F0aW9uKSB7XG4gICAgICAgIGNvbnN0IG52bSA9IHRoaXM7XG5cbiAgICAgICAgaWYgKGF1dGhlbnRpY2F0aW9uLmlzTG9nZ2VkSW4oKSkge1xuICAgICAgICAgICAgbnZtLmxvZ2dlZEluVXJpID0gdHJ1ZTtcbiAgICAgICAgICAgIG52bS5sb2dnZWRJbk5hbWUgPSBhdXRoZW50aWNhdGlvbi5jdXJyZW50VXNlcigpLm5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBudm0ubG9nZ2VkSW5VcmkgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIG52bS5sb2dvdXQgPSAoKSA9PiB7XG4gICAgICAgICAgICBhdXRoZW50aWNhdGlvbi5Mb2dvdXQoKTtcbiAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvc2lnbmluJyk7XG4gICAgICAgIH07XG4gICAgfVxufSkoKTtcbiIsIi8qXG58LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxufCBzZXR0aW5nIHVwIGZvb3RlciBkaXJlY3RpdmUgZm9yIGFwcGxpY2F0aW9uXG58IEBhdXRob3I6IGphaGlkIGhhcXVlIDxqYWhpZC5oYXF1ZUB5YWhvby5jb20+XG58IEBjb3B5cmlnaHQ6IG5iYXNscCwgMjAxN1xufC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiovXG5cbid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uICgpIHtcbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ25iYXNscCcpXG4gICAgICAgIC5kaXJlY3RpdmUoJ3NpdGVGb290ZXInLCBzaXRlRm9vdGVyKTtcbiAgICBmdW5jdGlvbiBzaXRlRm9vdGVyKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbW1vbi9kaXJlY3RpdmVzL2Zvb3Rlci9mb290ZXIudGVtcGxhdGUuaHRtbCcsXG4gICAgICAgIH07XG4gICAgfVxufSkoKTtcbiIsIi8qXG58LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxufCBzZXR0aW5nIHVwIGhvbWVwYWdlIGNvbnRyb2xsZXJcbnwgQGF1dGhvcjogamFoaWQgaGFxdWUgPGphaGlkLmhhcXVlQHlhaG9vLmNvbT5cbnwgQGNvcHlyaWdodDogbmJhLXNscCwgMjAxN1xufC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiovXG4ndXNlIHN0cmljdCc7XG4oZnVuY3Rpb24oKXtcblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ25iYXNscCcpXG5cdFx0LmNvbnRyb2xsZXIoJ3dlbGNvbWVDdHJsJywgd2VsY29tZUN0cmwpO1xuXG5cdGZ1bmN0aW9uIHdlbGNvbWVDdHJsKCkge1xuXHRcdGNvbnN0IHd2bSA9IHRoaXM7XG5cdH1cbn0pKCk7XG4iLCIvKlxufC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbnwgc2V0dGluZyB1cCBzaWdudXAgY29udHJvbGxlciBmb3IgdGhlIGFwcFxufCBAYXV0aG9yOiBqYWhpZCBoYXF1ZSA8amFoaWQuaGFxdWVAeWFob28uY29tPlxufCBAY29weXJpZ2h0OiBuYmFzbHAsIDIwMTdcbnwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4qL1xuXG4ndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbiAoKSB7XG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCduYmFzbHAnKVxuICAgICAgICAuY29udHJvbGxlcignc2lnbnVwQ3RybCcsIHNpZ251cEN0cmwpO1xuXG4gICAgc2lnbnVwQ3RybC4kaW5qZWN0ID0gWydhdXRoZW50aWNhdGlvbicsICckbG9jYXRpb24nXTtcblxuICAgIGZ1bmN0aW9uIHNpZ251cEN0cmwoYXV0aGVudGljYXRpb24sICRsb2NhdGlvbikge1xuICAgICAgICBjb25zdCByZWd2bSA9IHRoaXM7XG5cbiAgICAgICAgLy8gdXNlciBvYmplY3QuXG4gICAgICAgIHJlZ3ZtLnVzZXIgPSB7XG4gICAgICAgICAgICBmaXJzdE5hbWU6ICcnLFxuICAgICAgICAgICAgbGFzdE5hbWU6ICcnLFxuICAgICAgICAgICAgZGlzcGxheU5hbWU6ICcnLFxuICAgICAgICAgICAgZW1haWw6ICcnLFxuICAgICAgICAgICAgcGFzc3dvcmQ6ICcnLFxuICAgICAgICAgICAgY29uZmlybVBhc3N3b3JkOiAnJyxcbiAgICAgICAgfTtcblxuICAgICAgICByZWd2bS5yZWdpc3RlciA9ICgpID0+IHtcbiAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICAgICAgLnNpZ25VcChyZWd2bS51c2VyKVxuICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5lcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVndm0uUmVnaXN0cmF0aW9uRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVndm0uUmVnaXN0cmF0aW9uRXJyb3JNc2cgPSByZXNwb25zZS5kYXRhLmVycm9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVndm0uUmVnaXN0cmF0aW9uRXJyb3IgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvd2VsY29tZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWd2bS5SZWdpc3RyYXRpb25FcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWd2bS5SZWdpc3RyYXRpb25FcnJvck1zZyA9IGVyci5kYXRhLmVycm9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGF1dGhlbnRpY2F0aW9uLmlzTG9nZ2VkSW4oKSkge1xuICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy93ZWxjb21lJyk7XG4gICAgICAgIH1cbiAgICB9XG59KSgpO1xuIiwiLypcbnwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG58IHNldHRpbmcgdXAgY29udHJvbGxlciBmb3IgbG9naW4gcGFnZVxufCBAYXV0aG9yOiBqYWhpZCBoYXF1ZSA8amFoaWQuaGFxdWVAeWFob28uY29tPlxufCBAY29weXJpZ2h0OiBuYmFzbHAsIDIwMTdcbnwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4qL1xuXG4ndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbiAoKSB7XG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCduYmFzbHAnKVxuICAgICAgICAuY29udHJvbGxlcignc2lnbmluQ3RybCcsIHNpZ25pbkN0cmwpO1xuXG4gICAgc2lnbmluQ3RybC4kaW5qZWN0ID0gWydhdXRoZW50aWNhdGlvbicsICckbG9jYXRpb24nXTtcblxuICAgIGZ1bmN0aW9uIHNpZ25pbkN0cmwoYXV0aGVudGljYXRpb24sICRsb2NhdGlvbikge1xuICAgICAgICBjb25zdCBsdm0gPSB0aGlzO1xuXG4gICAgICAgIGx2bS51c2VyID0ge1xuICAgICAgICAgICAgZW1haWw6ICcnLFxuICAgICAgICAgICAgcGFzc3dvcmQ6ICcnLFxuICAgICAgICB9OyBcblxuICAgICAgICBpZiAoYXV0aGVudGljYXRpb24uaXNMb2dnZWRJbigpKSB7XG4gICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnL3dlbGNvbWUnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGx2bS5sb2dpbiA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWx2bS51c2VyLmVtYWlsIHx8ICFsdm0udXNlci5wYXNzd29yZCkge1xuICAgICAgICAgICAgICAgICAgICBsdm0ubG9naW5FcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGx2bS5sb2dpbkVycm9yTXNnID0gYEVycm9yISBhbGwgKiBmaWVsZHMgYXJlIHJlcXVpcmVkYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGx2bS5sb2dpbkVycm9yID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGx2bS5kb0xvZ2luKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgbHZtLmRvTG9naW4gPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgICAgICAgICAgLnNpZ25Jbihsdm0udXNlcilcbiAgICAgICAgICAgICAgICAgICAgLmVycm9yKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGx2bS5sb2dpbkVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGx2bS5sb2dpbkVycm9yTXNnID0gZXJyLmVycm9yO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnL3dlbGNvbWUnKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG59KSgpO1xuIl19
